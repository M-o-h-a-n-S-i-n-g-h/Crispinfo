{"version":3,"sources":["admin/ManagePosts.js","apicalls/index.js","admin/Navigation.js","Core/Base.js"],"names":["ManagePosts","history","useState","posts","setPosts","useEffect","preLoad","getAllPosts","then","data","console","log","catch","err","title","description","to","className","map","post","index","key","_id","onClick","id","deletePost","response","timeOut","setTimeout","push","clearTimeout","deleteBlogPost","createPost","a","fields","fetch","method","headers","body","JSON","stringify","json","createCategory","category","getCategories","abortController","AbortController","signal","getPostById","updatePost","getCategoryById","getCatePosts","withRouter","Base","children"],"mappings":"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","file":"static/js/8.d3a8ab47.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Base from \"../Core/Base\";\r\nimport { getAllPosts, deletePost } from \"../apicalls\";\r\n\r\nconst ManagePosts = ({ history }) => {\r\n  const [posts, setPosts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    preLoad();\r\n  }, []);\r\n\r\n  const preLoad = () => {\r\n    getAllPosts()\r\n      .then((data) => {\r\n        if (data) {\r\n          setPosts(data);\r\n        } else {\r\n          console.log(\"ERROR FETCHING POSTS\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const managePostsForm = () => {\r\n    const deleteBlogPost = (id) => {\r\n      deletePost(id).then((response) => {\r\n        console.log(\"Successfully deleted\");\r\n      });\r\n      const timeOut = setTimeout(() => {\r\n        console.log(\"This function ran\");\r\n        history.push(\"/allPosts\");\r\n      }, 1000);\r\n      return () => clearTimeout(timeOut);\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          {\" \"}\r\n          <Link to=\"/admin\" className=\"btn btn-success mb-3\">\r\n            Home\r\n          </Link>\r\n        </div>\r\n        {posts.map((post, index) => {\r\n          return (\r\n            <div className=\"row mb-3\" key={index}>\r\n              <h4 className=\"col-4\">{post.title}</h4>\r\n              <Link className=\"col-4 \" to={`/update/post/${post._id} `}>\r\n                <span className=\"btn btn-info\">Update Post</span>\r\n              </Link>\r\n              <Link className=\"col-4\" to=\"#\">\r\n                {\" \"}\r\n                <span\r\n                  className=\"btn btn-danger\"\r\n                  onClick={() => deleteBlogPost(post._id)}\r\n                >\r\n                  Delete Post\r\n                </span>\r\n              </Link>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Base title=\"Manage Posts\" description=\"Updating and Deleting Posts\">\r\n      <div>{managePostsForm()}</div>\r\n    </Base>\r\n  );\r\n};\r\n\r\nexport default ManagePosts;\r\n","export const createPost = async ({ fields }, id) => {\r\n  try {\r\n    const response = await fetch(`/api/blog/${id}/create`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Accept\": \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(fields),\r\n    });\r\n    return response.json();\r\n  } catch (error) {\r\n    return console.log(error);\r\n  }\r\n};\r\n\r\nexport const createCategory = async (category) => {\r\n  try {\r\n    const response = await fetch(\"/api/category/create\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Accept\": \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(category),\r\n    });\r\n    console.log(response);\r\n    return response.json();\r\n  } catch (error) {\r\n    return console.log(error);\r\n  }\r\n};\r\n\r\nexport const getAllPosts = async () => {\r\n  try {\r\n    const response = await fetch(\"/api/blog\", {\r\n      method: \"GET\",\r\n    });\r\n    return response.json();\r\n  } catch (err) {\r\n    console.log(\"error :\", err);\r\n  }\r\n};\r\n\r\nexport const getCategories = async () => {\r\n  const abortController = new AbortController();\r\n  try {\r\n    const response = await fetch(\r\n      \"/api/allCategories\",\r\n      {\r\n        method: \"GET\",\r\n      },\r\n      { signal: abortController.signal }\r\n    );\r\n    return response.json();\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const getPostById = async (id) => {\r\n  try {\r\n    const response = await fetch(`/api/blog/${id}`, {\r\n      method: \"GET\",\r\n    });\r\n    console.log(response);\r\n    return response.json();\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const updatePost = async ({ fields }, id) => {\r\n  try {\r\n    const response = await fetch(`/api/blog/update/${id}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Accept\": \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(fields),\r\n    });\r\n    console.log(response);\r\n    return response.json();\r\n  } catch (err) {\r\n    return console.log(err);\r\n  }\r\n};\r\n\r\nexport const deletePost = async (id) => {\r\n  try {\r\n    const response = await fetch(`/api/blog/delete/${id}`, {\r\n      method: \"DELETE\",\r\n    });\r\n    return response.json();\r\n  } catch (err) {\r\n    return console.log(err);\r\n  }\r\n};\r\n\r\nexport const getCategoryById = async (id) => {\r\n  try {\r\n    const response = await fetch(`/api/category/${id}`, {\r\n      method: \"GET\",\r\n    });\r\n    return response.json();\r\n  } catch (err) {\r\n    return console.log(err);\r\n  }\r\n};\r\n\r\nexport const getCatePosts = async (id) => {\r\n  try {\r\n    const response = await fetch(`/api/category/${id}/posts`, {\r\n      method: \"GET\",\r\n    });\r\n    return response.json();\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\n\r\nconst Navigation = () => (\r\n  <div className=\"bg-dark\">\r\n    <ul className=\"nav nav-tabs bd-dark\">\r\n      <li className=\"nav-item\">\r\n        <Link className=\"nav-link text-primary\" to=\"/\">\r\n          Home\r\n        </Link>\r\n      </li>\r\n      <li className=\"nav-item\">\r\n        <Link className=\"nav-link text-primary\" to=\"/admin/dashboard\">\r\n          A.Dashboard\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n);\r\n\r\nexport default withRouter(Navigation);\r\n","import React from \"react\";\r\nimport Navigation from \"../admin/Navigation\";\r\n\r\nconst Base = ({\r\n  title = \"My-Title\",\r\n  description = \"My description\",\r\n  className = \"bg-dark text-white p-4\",\r\n  children,\r\n}) => (\r\n  <div className=\"bg-dark\">\r\n    <Navigation />\r\n    <div>\r\n      <div className=\"jumbotron text-white bg-dark text-center\">\r\n        <h2 className=\"display-4\">{title}</h2>\r\n        <p className=\"lead\">{description}</p>\r\n        <div className={className}>{children}</div>\r\n      </div>\r\n      <footer className=\"bg-dark mt-auto py-3\">\r\n        <div className=\"container-fluid bg-success text-white text-center\">\r\n          <h4>If you have any quest,feel free to ask me </h4>\r\n          <button className=\"btn btn-warning bt-lg mb-3\">Click me </button>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default Base;\r\n"],"sourceRoot":""}